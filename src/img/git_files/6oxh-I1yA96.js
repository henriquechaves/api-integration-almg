if (self.CavalryLogger) { CavalryLogger.start_js(["A6++o"]); }

__d("EnterpriseLabsLoggingEvents",[],(function a(b,c,d,e,f,g){f.exports={FOCUS_MODE_MESSAGE_SENT_ASYNC:"enterprise_labs.focus_mode.send_message_async",FOCUS_MODE_MESSAGE_SENT_BYPASSED:"enterprise_labs.focus_mode.send_message_bypassed",FOCUS_MODE_SENT_NO_MESSAGES:"enterprise_labs.focus_mode.sent_no_messages",FOCUS_MODE_BYPASS_THREAD:"enterprise_labs.focus_mode.bypass_thread",FOCUS_MODE_BYPASS_FAILURE:"enterprise_labs.focus_mode.bypass_failure",FOCUS_MODE_MUTE_NOTIFICATION:"enterprise_labs.focus_mode.mute_notification",DUALITY_WARNING_SHOWN:"enterprise_labs.duality.warning_shown",DUALITY_WARNING_DISMISSED:"enterprise_labs.duality.warning_dismissed",DUALITY_SWITCH_USER:"enterprise_labs.duality.switch_user",DUALITY_SWITCH_ACCOUNTS:"enterprise_labs.duality.switch_accounts",HIJACKED_DUALITY_WARNING_SHOWN:"enterprise_labs.hijacked_duality.warning_shown",HIJACKED_DUALITY_WARNING_DISMISSED:"enterprise_labs.hijacked_duality.warning_dismissed",HIJACKED_DUALITY_SWITCH_USER:"enterprise_labs.hijacked_duality.switch_user",TIMEZONE_WARNING_SHOWN:"enterprise_labs.timezone.warning_shown",TIMEZONE_WARNING_IGNORED:"enterprise_labs.timezone.warning_ignored",TIMEZONE_WARNING_DISMISSED:"enterprise_labs.timezone.warning_dismissed",NT_CLICK_TAB:"enterprise_labs.nt.click.tab"};}),null);
__d('EnterpriseLabsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:EnterpriseLabsLoggerConfig',this.$EnterpriseLabsTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:EnterpriseLabsLoggerConfig',this.$EnterpriseLabsTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$EnterpriseLabsTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$EnterpriseLabsTypedLogger1=babelHelpers['extends']({},this.$EnterpriseLabsTypedLogger1,j);return this;};h.prototype.setEntityID=function(j){this.$EnterpriseLabsTypedLogger1.entity_id=j;return this;};h.prototype.setEvent=function(j){this.$EnterpriseLabsTypedLogger1.event=j;return this;};h.prototype.setVC=function(j){this.$EnterpriseLabsTypedLogger1.vc=j;return this;};h.prototype.updateExtraData=function(j){j=c('nullthrows')(c('GeneratedLoggerUtils').serializeMap(j));c('GeneratedLoggerUtils').checkExtraDataFieldNames(j,i);this.$EnterpriseLabsTypedLogger1=babelHelpers['extends']({},this.$EnterpriseLabsTypedLogger1,j);return this;};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l);};var i={entity_id:true,event:true,vc:true};f.exports=h;}),null);
__d("XCheckFocusModeAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/work\/focus_mode\/check\/",{fbid:{type:"FBID",required:true}});}),null);
__d('ChatSubscribeToFocusModeChanges',['AsyncRequest','ImmutableObject','RelayGraphQLSubscriber','RelayGraphQLSubscriptionNetworkLayer','WorkAvailabilityStatusChangeSubscription','XDliteGraphQLSkywalkerController','MercuryServerPayloadPreprocessor','MercuryPayloadSource','WorkUserAvailabilityStatusType','MercuryThreadInformer','XCheckFocusModeAsyncController','MercuryParticipants'],(function a(b,c,d,e,f,g){'use strict';var h=c('XDliteGraphQLSkywalkerController').getURIBuilder().getURI();c('RelayGraphQLSubscriptionNetworkLayer').injectGraphQLSubscriber(c('RelayGraphQLSubscriber')(h));var i={},j={},k=function m(n,o,p,q){var r=c('MercuryParticipants').getNow(p.id);if(!r)return;var s=c('ImmutableObject').setProperty(r,'is_user_focusing',q);c('MercuryServerPayloadPreprocessor').getForFBID(n).handleUpdate({participants:[s],from_client:false,payload_source:c('MercuryPayloadSource').SERVER_FETCH_PARTICIPANTS});Object.keys(j[o]).forEach(function(t){c('MercuryThreadInformer').getForFBID(n).updatedThread(t);});},l=function m(n,o,p){var q=p.fbid;if(!q)return;if(!p.employee)return;if(n===q)return;if(!j[q])j[q]={};j[q][o]=o;if(i[q])return;var r=c('XCheckFocusModeAsyncController').getURIBuilder().setFBID('fbid',q).getURI();new (c('AsyncRequest'))().setURI(r).setHandler(function(s){var t=s.payload;if(!t)return;k(n,q,p,t.is_user_focusing);}).send();i[q]=new (c('WorkAvailabilityStatusChangeSubscription'))({user_id:q},function(s){var t=s.work_availability_status_change_subscribe.user,u=t?t.work_info:null,v=u?u.availability_status:null;if(v&&v.status&&v.end_date!==null){var w=c('WorkUserAvailabilityStatusType')[v.status],x=w===c('WorkUserAvailabilityStatusType').FOCUS&&v.end_date*1000>Date.now();k(n,q,p,x);}});};f.exports={subscribe:l};}),null);
__d('ChatUserFocusLogging',['EnterpriseLabsLoggingEvents','EnterpriseLabsTypedLogger','FantaDispatcher','FantaTabActions','MercuryDispatcher','MercuryPayloadSource','MercuryThreads'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryDispatcher').get(),i=c('MercuryThreads').get(),j={},k=function n(o,p){try{if(p.payload_source!==c('MercuryPayloadSource').CLIENT_SEND_MESSAGE)return;var q=p.actions||[];q.forEach(function(r){var s=r.thread_id;if(!s||!j[s])return;var t=i.getThreadMetaNow(s);if(!t)return;var u=(t.bypass_focus_mode_until||0)*1000>Date.now();j[r.thread_id].messagesSent=true;var v=u?c('EnterpriseLabsLoggingEvents').FOCUS_MODE_MESSAGE_SENT_BYPASSED:c('EnterpriseLabsLoggingEvents').FOCUS_MODE_MESSAGE_SENT_ASYNC;new (c('EnterpriseLabsTypedLogger'))().setEntityID(s).setEvent(v).log();});}catch(r){return;}},l=function n(o){try{if(o.actionType===c('FantaTabActions').Types.CLOSE_TAB){var p=j[o.threadID];if(!p)return;if(!p.messagesSent&&!p.closed)new (c('EnterpriseLabsTypedLogger'))().setEntityID(o.threadID).setEvent(c('EnterpriseLabsLoggingEvents').FOCUS_MODE_SENT_NO_MESSAGES).log();p.closed=true;}}catch(q){return;}};h.subscribe('update-messages',k);c('FantaDispatcher').register(l);m.prototype.registerThreadID=function(n){if(j[n]&&!j[n].closed)return;j[n]={messagesSent:false,closed:false};};function m(){}f.exports=new m();}),null);